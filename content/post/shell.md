+++

title = "Shell 基础"
date = 2017-02-01T00:00:00+08:00
categories = ["读书笔记"]
toc = true
author = "ElvisSong"
author_homepage =  "https://elvissong.github.io/post/"
+++

## 
### Shell是什么
Shell 是一个命令行解释器，它为用户提供了一个向 Linux 内核发送请求以便运行程序的界面系统级程序。
Shell 还是一个弓能强大的编程语言，易编写，易调试，灵活性较强。Shell 是解释执行的的脚本语言，在 Shell 中可以直接调用 Linux 系统命令。

### 一些命令
1. echo 输出命令
* echo [选项] [输出内容]
* 选项：-e: 支持反斜线控制字符转换

控制字符 | 作用 |
-- | --
\a | 输出警告声
\b | 退格键，也就是向左删除键
\n | 换行符
\r | 回车键
\t | 制表符，也就是 tab 键
\v | 垂直制表符
\0nnn | 按照八进制 ASCII 码表输出字符。0 是数字零，nnn 是三位八进制数
\xhh | 按照十六进制 ASCII 码表输出字符。

2. 脚本执行
* 赋予执行权限，直接运行
> chmod 755 hello.sh

> ./hello.sh

* 通过 Bash 调用脚本
> bash hello.sh

### Bash 的基本功能

#### 命令别名和快捷键
* 查看系统中所有命令的别名
> alias
* 设定别名命令
> alias 别名=‘原命令’ 
* 别名永久生效，需写入环境变量配置文件
> vi ~/.bashrc
* 删除别名
> unalias

#### 命令生效顺序
1. 第一顺位执行用绝对路径或相对路径执行的命令
2. 第二顺位执行命令
3. 第三顺位执行 Bash 的内部命令
4. 第四顺位执行按照 $PATH 环境变量定义的目录查找顺序找到的第一个命令

#### 常用快捷键
1. Ctrl + c : 强制终止当前命令
2. Ctrl + l : 清屏
3. Ctrl + a : 光标移动到命令行首
4. Ctrl + e : 光标移动到命令行尾
5. Ctrl + u ：从光标所在位置删除到行首
6. Ctrl + z : 把命令放入后台
7. Ctrl + r : 在历史命令中搜索

#### 历史命令
* 查看历史命令
> history [选项] [历史命令保存文件]

> -c: 清空历史命令

> -w：把缓存中的历史命令写入历史命令保存文件 ~/.bash_history

* 历史命令的调用
1. 使用上下箭头调用之前的命令
2. 使用 “!n” 重复执行第 n 条历史命令
3. 使用 “!!” 重复执行上一条命令
4. 使用 “!字串” 重复执行最后一条以该字串开头的命令


#### 输出重定向
* 输出重定向

<table>
   <tr>
      <td>类型</td>
      <td>符号</td>
      <td>作用</td>
   </tr>
   <tr>
      <td rowspan="2">标准输出重定向</td>
      <td>命令 > 文件</td>
      <td>以覆盖的方式，把命令的正确输出输出到指定的文件或设备当中。</td>
   </tr>
   <tr>
      <td>命令 >> 文件</td>
      <td>以追加的方式，把命令的正确输出输出到指定的文件或设备当中。</td>
   </tr>
   <tr>
      <td rowspan="2">标准错误输出重定向</td>
      <td>错误命令 2> 文件</td>
      <td>以覆盖的方式，把命令的错误输出输出到指定的文件或设备当中。</td>
   </tr>
   <tr>
      <td>错误命令 2>> 文件</td>
      <td>以追加的方式，把命令的错误输出输出到指定的文件或设备当中。</td>
   </tr>
   <tr>
      <td rowspan="5">正确输出和错误输出同时保存</td>
      <td>命令 > 文件 2>&1</td>
      <td>以覆盖的方式，把正确输出和错误输出输出保存到同一文件当中。</td>
   </tr>
   <tr>
      <td>命令 >> 文件 2>&1</td>
      <td>以追加的方式，把正确输出和错误输出输出保存到同一文件当中。</td>
   </tr>
   <tr>
      <td>命令 &> 文件</td>
      <td>以覆盖的方式，把正确输出和错误输出输出保存到同一文件当中。</td>
   </tr>
   <tr>
      <td>命令 &>> 文件</td>
      <td>以追加的方式，把正确输出和错误输出输出保存到同一文件当中。</td>
   </tr>
   <tr>
      <td>命令 >> 文件1 2>> 文件2</td>
      <td>把正确的输出追加到文件1，把错误的输出追加到文件2中。</td>
   </tr>
</table>

* 输入重定向
> wc [选项][文件名]

> 选项：

> -c: 统计字节数
> -w: 统计单词数
> -l：统计行数

#### 多命令顺序执行

* 多命令执行符
多命令执行符 | 格式 | 作用 
 -- | -- | --
; | 命令1;命令2 | 多个命令顺序执行，命令之间没有任何逻辑关系
&& | 命令1&&命令2 | 逻辑与, 当命令1正确执行，则命令2才会执行；当命令1执行不正确，则命令2不会执行
\|\| | 命令1\|\|命令2 | 逻辑或，当命令1执行不正确，则命令2才会执行；当命令1正确执行，命令2不会执行

*   管道符

命令1正确输出作为命令2的操作对象

> 命令1 | 命令2 

#### Shell 中特殊符号
* 通配符

| 通配符  |  作用 |
| ----- | ------------------------- |
| ? | 匹配一个任意字符
| * | 匹配0个或任意多个任意字符，也就是匹配任何内容
| [] | 匹配括号中任意一个字符串。如：[abc]代表一定匹配一个字符，或者a,或者b,或者c.
| [-] | 匹配括号中任意一个字符，-代表一个范围。[a-z]代表匹配一个小写字母
| [^] | 逻辑非，表示匹配不是括号内的一个字符。[^0-9]表示匹配一个不是数字的字符

* Bash 中其他特殊符号

| 符号 | 作用 
| --- | --- 
| ‘’ | 单引号。在单引号中所有的特殊符号，如 ‘$’ 和 ‘`’ 都没有特殊含义。 
| “” | 双引号。在双引号中特殊字符都没有特殊含义，但是 “$”、“`”和“\”是例外，拥有“调用变量的值”，“引用命令”和“转义符”的特殊含义。
| `` | 反引号。 反引号括起来的是系统命令，在 Bash 中会先执行它。和$()作用一样，推荐使用$()，反引号容易看错。
| # | 在 Shell 脚本中， #开头的行代表注释。
| $ | 用于调用变量的值，如需要调用变量 name 的值时，使用 $name。
| \ | 转义符，跟在 \ 后的特殊符号失去特殊含义，变为普通字符。 